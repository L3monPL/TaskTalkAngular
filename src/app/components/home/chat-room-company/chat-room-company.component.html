<div class="chat_container">
    <!-- <button [disabled]="this.isDuplicateMessage" (click)="loadMoreMessages()">Load More</button> -->
    <div class="chat_top_header_container">
        <div class="chat_room_name">
            Nazwa kana≈Çu chatowego
        </div>
        <div class="row_header_container">
            <div class="users_icon_info">
                <svg id="Layer_1" viewBox="0 0 24 24" width="17" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m7.5 13a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-7a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0 -2.5-2.5zm7.5 17v-.5a7.5 7.5 0 0 0 -15 0v.5a1 1 0 0 0 2 0v-.5a5.5 5.5 0 0 1 11 0v.5a1 1 0 0 0 2 0zm9-5a7 7 0 0 0 -11.667-5.217 1 1 0 1 0 1.334 1.49 5 5 0 0 1 8.333 3.727 1 1 0 0 0 2 0zm-6.5-9a4.5 4.5 0 1 1 4.5-4.5 4.505 4.505 0 0 1 -4.5 4.5zm0-7a2.5 2.5 0 1 0 2.5 2.5 2.5 2.5 0 0 0 -2.5-2.5z"/></svg>
                32
            </div>
        </div>
    </div>
    <div class="chat_content_container">
        <div #scrollContainer (scroll)="onScroll($event)" class="messages_container">
            @for (item of this.messages; track item.id) {
                @if (messageWithIcon(item)) {
                    <div [ngClass]="{'message_item_current_user': item.userId == this.userDataService.getId(), 'margin_bottom_message': item.userId != this.userDataService.getId()}" class="message_item margin_bottom_message">
                        @if (item.userId != this.userDataService.getId()) {
                            <div class="user_icon">
        
                            </div>
                        }
                        <div class="chat_container_item">
                            @if (messageWithUsername(item)) {
                                @if (item.userId != this.userDataService.getId()) {
                                    <div class="username_item">
                                        {{item.username}}
                                    </div>
                                }
                            }
                            <div class="message_container">
                                {{item.message}}
                            </div>
                        </div>
        
                    </div>
                }
                @if (messageWithoutIcon(item)) {
                    <div [ngClass]="{'message_item_current_user': item.userId == this.userDataService.getId()}" class="message_item margin_left_message">
                        <div class="chat_container_item">
                            @if (messageWithUsername(item)) {
                                @if (item.userId != this.userDataService.getId()) {
                                    <div class="username_item">
                                        {{item.username}}
                                    </div>
                                }
                            }
                            <div class="message_container">
                                {{item.message}}
                            </div>
                        </div>
        
                    </div>
                }
            }
        </div>
        @if (this.openEmojiPanel) {
            <div class="emoji_picker_container">
                <app-emoji-picker (selectEmitter)="addEmojiToChat($event)" (closeComponent)="this.openEmojiPanel = false"></app-emoji-picker>
            </div>
        }@if (this.filesList?.length) {
            <div class="file_list_container">
                @for (item of this.filesList; track $index) {
                    {{item.name}}
                }
            </div>
        }
    </div>
    <div class="inputs">
        <textarea [(ngModel)]="this.inputMessage" (keydown)="sendMessage($event)" (input)="onInput($event)" #textArea name="" id="" cols="30" rows="10" placeholder="Message..."></textarea>
        <div class="action_icons_container">
            <div (click)="this.openEmojiPanel = !this.openEmojiPanel" class="icon_input_item">
                <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="20" height="20"><path d="M12,24A12,12,0,1,1,24,12,12.013,12.013,0,0,1,12,24ZM12,2A10,10,0,1,0,22,12,10.011,10.011,0,0,0,12,2Zm5,14a1,1,0,0,0-1-1H8a1,1,0,0,0,0,2h8A1,1,0,0,0,17,16ZM6,10c0,1,.895,1,2,1s2,0,2-1a2,2,0,0,0-4,0Zm8,0c0,1,.895,1,2,1s2,0,2-1a2,2,0,0,0-4,0Z"/></svg>
            </div>
            <label for="file-input" (click)="true" class="icon_input_item">
                <!-- <label for="file-input"> -->
                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="19" height="19"><path d="M22.95,9.6a1,1,0,0,0-1.414,0L10.644,20.539a5,5,0,1,1-7.072-7.071L14.121,2.876a3,3,0,0,1,4.243,4.242L7.815,17.71a1.022,1.022,0,0,1-1.414,0,1,1,0,0,1,0-1.414l9.392-9.435a1,1,0,0,0-1.414-1.414L4.987,14.882a3,3,0,0,0,0,4.243,3.073,3.073,0,0,0,4.243,0L19.778,8.532a5,5,0,0,0-7.071-7.07L2.158,12.054a7,7,0,0,0,9.9,9.9L22.95,11.018A1,1,0,0,0,22.95,9.6Z"/></svg>
                <!-- </label> -->
                <input type="file" id="file-input" multiple hidden (change)="onFileSelected($event)">
                <!-- <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="19" height="19"><path d="M22.95,9.6a1,1,0,0,0-1.414,0L10.644,20.539a5,5,0,1,1-7.072-7.071L14.121,2.876a3,3,0,0,1,4.243,4.242L7.815,17.71a1.022,1.022,0,0,1-1.414,0,1,1,0,0,1,0-1.414l9.392-9.435a1,1,0,0,0-1.414-1.414L4.987,14.882a3,3,0,0,0,0,4.243,3.073,3.073,0,0,0,4.243,0L19.778,8.532a5,5,0,0,0-7.071-7.07L2.158,12.054a7,7,0,0,0,9.9,9.9L22.95,11.018A1,1,0,0,0,22.95,9.6Z"/></svg> -->
            </label>
        </div>
    </div>
</div>
